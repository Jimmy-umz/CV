<!-- 員工 主頁面 -->

<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>銷售儀表板 - Smile & Sunshine Toys</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
    />
    <script src="JS/theme.js"></script>
    <link rel="stylesheet" href="CSS/sales-dashboard.css" />
    <script src="JS/sales-dashboard.js" defer></script>
  </head>
  <body class="staff-mode">
    <!-- 頁頭 -->
    <header class="theme-header">
      <div class="header-content">
        <div class="logo">
          <i class="fas fa-smile"></i>
          <h1>Smile & Sunshine </h1>
        </div>
        <div class="nav-links" id="nav-links">
          <!-- 導航鏈接會通過 JS 動態生成 -->
        </div>
      </div>
    </header>

    <!-- 主內容區 -->
    <div class="dashboard-container">
      <!-- 側邊欄 -->
      <div class="sidebar">
        <div class="staff-info">
          <div class="staff-avatar">
            <i class="fas fa-user-tie"></i>
          </div>
          <div class="staff-details">
            <h3 id="staff-name">員工名稱</h3>
            <p>銷售經理</p>
            <div class="staff-status">
              <i class="fas fa-circle"></i>
              <span>在線</span>
            </div>
          </div>
        </div>

        <nav class="sidebar-nav">
          <a href="sales-dashboard.html" class="nav-item active">
            <i class="fas fa-tachometer-alt"></i>
            <span>儀表板</span>
          </a>
          <a href="product-management.html" class="nav-item">
            <i class="fas fa-boxes"></i>
            <span>商品管理</span>
          </a>
          <a href="order-management.html" class="nav-item">
            <i class="fas fa-clipboard-list"></i>
            <span>訂單管理</span>
          </a>
          <a href="customer-management.html" class="nav-item">
            <i class="fas fa-users"></i>
            <span>客戶管理</span>
          </a>
          <a href="quotation-management.html" class="nav-item">
            <i class="fas fa-file-invoice-dollar"></i>
            <span>報價管理</span>
          </a>
          <a href="staff-profile.html" class="nav-item">
            <i class="fas fa-user-cog"></i>
            <span>員工中心</span>
          </a>
        </nav>

        <div class="sidebar-footer">
          <div class="quick-stats">
            <div class="quick-stat">
              <i class="fas fa-shopping-cart"></i>
              <div>
                <span class="stat-number" id="quick-orders">0</span>
                <span class="stat-label">今日訂單</span>
              </div>
            </div>
            <div class="quick-stat">
              <i class="fas fa-dollar-sign"></i>
              <div>
                <span class="stat-number" id="quick-revenue">$0</span>
                <span class="stat-label">今日營收</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 主內容 -->
      <div class="main-content">
        <!-- 頁面標題和快速操作 -->
        <div class="page-header">
          <div class="header-title">
            <h1><i class="fas fa-tachometer-alt"></i> 銷售儀表板</h1>
            <p>即時銷售數據和業務洞察</p>
          </div>
          <div class="header-actions">
            <div class="date-selector">
              <select id="time-range">
                <option value="today">今天</option>
                <option value="week" selected>本週</option>
                <option value="month">本月</option>
                <option value="quarter">本季</option>
                <option value="year">今年</option>
              </select>
            </div>
            <button class="btn-primary" onclick="exportReport()">
              <i class="fas fa-download"></i> 匯出報表
            </button>
            <button class="btn-secondary" onclick="refreshData()">
              <i class="fas fa-sync-alt"></i> 重新整理
            </button>
          </div>
        </div>

        <!-- KPI 指標卡片 -->
        <div class="kpi-cards">
          <div class="kpi-card revenue">
            <div class="kpi-icon">
              <i class="fas fa-dollar-sign"></i>
            </div>
            <div class="kpi-content">
              <div class="kpi-value" id="total-revenue">$48,256</div>
              <div class="kpi-label">總營收</div>
              <div class="kpi-trend positive">
                <i class="fas fa-arrow-up"></i>
                <span>12.5% 較上期</span>
              </div>
            </div>
          </div>

          <div class="kpi-card orders">
            <div class="kpi-icon">
              <i class="fas fa-shopping-cart"></i>
            </div>
            <div class="kpi-content">
              <div class="kpi-value" id="total-orders">324</div>
              <div class="kpi-label">總訂單數</div>
              <div class="kpi-trend positive">
                <i class="fas fa-arrow-up"></i>
                <span>8.2% 較上期</span>
              </div>
            </div>
          </div>

          <div class="kpi-card customers">
            <div class="kpi-icon">
              <i class="fas fa-users"></i>
            </div>
            <div class="kpi-content">
              <div class="kpi-value" id="new-customers">42</div>
              <div class="kpi-label">新客戶</div>
              <div class="kpi-trend positive">
                <i class="fas fa-arrow-up"></i>
                <span>5.3% 較上期</span>
              </div>
            </div>
          </div>

          <div class="kpi-card conversion">
            <div class="kpi-icon">
              <i class="fas fa-chart-line"></i>
            </div>
            <div class="kpi-content">
              <div class="kpi-value" id="conversion-rate">3.2%</div>
              <div class="kpi-label">轉換率</div>
              <div class="kpi-trend negative">
                <i class="fas fa-arrow-down"></i>
                <span>1.1% 較上期</span>
              </div>
            </div>
          </div>
        </div>

        <!-- 圖表區域 -->
        <div class="charts-grid">
          <!-- 營收趨勢圖 -->
          <div class="chart-card large">
            <div class="chart-header">
              <h3>營收趨勢</h3>
              <div class="chart-actions">
                <button class="btn-chart active" data-metric="revenue">
                  營收
                </button>
                <button class="btn-chart" data-metric="orders">訂單數</button>
                <button class="btn-chart" data-metric="customers">
                  客戶數
                </button>
              </div>
            </div>
            <div class="chart-container">
              <canvas id="revenue-chart"></canvas>
            </div>
          </div>

          <!-- 產品銷售排行 -->
          <div class="chart-card">
            <div class="chart-header">
              <h3>熱銷產品排行</h3>
              <select id="product-rank-filter">
                <option value="revenue">按營收</option>
                <option value="quantity">按數量</option>
              </select>
            </div>
            <div class="chart-container">
              <canvas id="product-chart"></canvas>
            </div>
          </div>

          <!-- 客戶分佈 -->
          <div class="chart-card">
            <div class="chart-header">
              <h3>客戶分佈</h3>
            </div>
            <div class="chart-container">
              <canvas id="customer-chart"></canvas>
            </div>
          </div>

          <!-- 銷售渠道 -->
          <div class="chart-card">
            <div class="chart-header">
              <h3>銷售渠道</h3>
            </div>
            <div class="chart-container">
              <canvas id="channel-chart"></canvas>
            </div>
          </div>
        </div>

        <!-- 數據表格區域 -->
        <div class="tables-grid">
          <!-- 最近訂單 -->
          <div class="table-card">
            <div class="table-header">
              <h3>最近訂單</h3>
              <a href="order-management.html" class="view-all">查看全部</a>
            </div>
            <div class="table-container">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>訂單編號</th>
                    <th>客戶</th>
                    <th>金額</th>
                    <th>狀態</th>
                    <th>日期</th>
                  </tr>
                </thead>
                <tbody id="recent-orders-table">
                  <!-- 最近訂單數據會通過 JS 動態生成 -->
                </tbody>
              </table>
            </div>
          </div>

          <!-- 庫存警報 -->
          <div class="table-card">
            <div class="table-header">
              <h3>庫存警報</h3>
              <span class="alert-badge">3</span>
            </div>
            <div class="table-container">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>產品</th>
                    <th>當前庫存</th>
                    <th>安全庫存</th>
                    <th>狀態</th>
                    <th>操作</th>
                  </tr>
                </thead>
                <tbody id="inventory-alerts-table">
                  <!-- 庫存警報數據會通過 JS 動態生成 -->
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- 快速行動卡片 -->
        <div class="action-cards">
          <div class="action-card">
            <div class="action-icon">
              <i class="fas fa-plus-circle"></i>
            </div>
            <div class="action-content">
              <h4>新增訂單</h4>
              <p>為客戶創建新訂單</p>
              <button class="btn-action" onclick="createNewOrder()">
                開始
              </button>
            </div>
          </div>

          <div class="action-card">
            <div class="action-icon">
              <i class="fas fa-file-invoice-dollar"></i>
            </div>
            <div class="action-content">
              <h4>創建報價</h4>
              <p>為客戶生成報價單</p>
              <button class="btn-action" onclick="createQuotation()">
                開始
              </button>
            </div>
          </div>

          <div class="action-card">
            <div class="action-icon">
              <i class="fas fa-chart-pie"></i>
            </div>
            <div class="action-content">
              <h4>銷售報告</h4>
              <p>生成詳細銷售分析</p>
              <button class="btn-action" onclick="generateReport()">
                生成
              </button>
            </div>
          </div>

          <div class="action-card">
            <div class="action-icon">
              <i class="fas fa-bell"></i>
            </div>
            <div class="action-content">
              <h4>系統通知</h4>
              <p>查看最新系統消息</p>
              <button class="btn-action" onclick="viewNotifications()">
                查看
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 導出報表模態框 -->
    <div class="modal" id="export-modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>匯出銷售報表</h3>
          <button class="close-modal" onclick="closeExportModal()">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="export-options">
            <div class="export-option">
              <label>
                <input type="radio" name="export-format" value="pdf" checked />
                <div class="option-content">
                  <i class="fas fa-file-pdf"></i>
                  <span>PDF 格式</span>
                </div>
              </label>
            </div>
            <div class="export-option">
              <label>
                <input type="radio" name="export-format" value="excel" />
                <div class="option-content">
                  <i class="fas fa-file-excel"></i>
                  <span>Excel 格式</span>
                </div>
              </label>
            </div>
            <div class="export-option">
              <label>
                <input type="radio" name="export-format" value="csv" />
                <div class="option-content">
                  <i class="fas fa-file-csv"></i>
                  <span>CSV 格式</span>
                </div>
              </label>
            </div>
          </div>

          <div class="export-settings">
            <div class="form-group">
              <label for="export-date-range">時間範圍</label>
              <select id="export-date-range">
                <option value="week">本週</option>
                <option value="month" selected>本月</option>
                <option value="quarter">本季</option>
                <option value="year">今年</option>
                <option value="custom">自訂範圍</option>
              </select>
            </div>

            <div class="form-group">
              <label for="export-metrics">包含指標</label>
              <div class="checkbox-group">
                <label>
                  <input
                    type="checkbox"
                    name="metrics"
                    value="revenue"
                    checked
                  />
                  營收數據
                </label>
                <label>
                  <input
                    type="checkbox"
                    name="metrics"
                    value="orders"
                    checked
                  />
                  訂單數據
                </label>
                <label>
                  <input
                    type="checkbox"
                    name="metrics"
                    value="customers"
                    checked
                  />
                  客戶數據
                </label>
                <label>
                  <input
                    type="checkbox"
                    name="metrics"
                    value="products"
                    checked
                  />
                  產品數據
                </label>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-actions">
          <button class="btn-secondary" onclick="closeExportModal()">
            取消
          </button>
          <button class="btn-primary" onclick="confirmExport()">
            <i class="fas fa-download"></i> 匯出報表
          </button>
        </div>
      </div>
    </div>

    <!-- 系統通知模態框 -->
    <div class="modal" id="notifications-modal">
      <div class="modal-content large">
        <div class="modal-header">
          <h3>系統通知</h3>
          <button class="close-modal" onclick="closeNotificationsModal()">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="notifications-list" id="notifications-list">
            <!-- 通知列表會通過 JS 動態生成 -->
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
